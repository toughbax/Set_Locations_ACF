jQuery(document).ready(function(t){$location_count=t(".single-location").length;var a=t("#acf-local_map").width(),s=Math.round(a/30),e=Math.ceil($location_count/s),n=0,i=0;t("#location-map").css("margin-top",30*e+"px"),t(".single-location").each(function(){var a=t(this);n>s-1&&(n=0,i++),a.attr("data-left-value")||a.attr("data-top-value")||(a.css("top",-30*e+30*i),a.css("left",30*n++))}),t(".single-location").draggable({containment:".image-map",stop:function(){var a=t(this).css("left"),s=parseInt(a),e=t(".image-map").width(),n=100*(s/e),i=Math.round(100*n)/100,o=t(this).css("top"),l=parseInt(o),c=t(".image-map").height(),r=100*(l/c),u=Math.round(100*r)/100;15>u?t(this).addClass("far-top"):t(this).removeClass("far-top"),i>85?t(this).addClass("far-left"):t(this).removeClass("far-left"),t(this).css("left",i+"%"),t(this).css("top",u+"%"),t(this).attr("data-left-value",i),t(this).attr("data-top-value",u)}}),t("#reset-map").on("click",function(a){a.preventDefault();var n=t(this).attr("data-admin-url"),i=t(this).attr("data-nonce");t.ajax({type:"POST",url:n,data:{action:"fs_acf_reset_locations",nonce:i},dataType:"html",success:function(a){if(a){var n=0,i=0;t("#location-map").css("margin-top",30*e+"px"),t(".single-location").each(function(){var a=t(this);n>s-1&&(n=0,i++),a.attr("data-left-value")||a.attr("data-top-value")||(a.css("top",-30*e+30*i),a.css("left",30*n++))})}}})}),t("#save-map").on("click",function(a){a.preventDefault();var s=t(this).attr("data-admin-url"),e=t(this).attr("data-nonce"),n=new Array;t(".single-location").each(function(){t(this);var a=t(this).attr("data-location-id"),s=t(this).attr("data-top-value"),e=t(this).attr("data-left-value"),i={id:a,top_value:s,left_value:e};n.push(i)}),t.ajax({type:"POST",url:s,data:{action:"fs_acf_set_locations",nonce:e,values:n},dataType:"html",success:function(t){}})})});